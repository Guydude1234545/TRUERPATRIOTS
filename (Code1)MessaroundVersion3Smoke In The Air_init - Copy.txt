campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 8,
            "default_map_color_hex": "#a3948c",
            "no_state_map_color_hex": "#a3948c"
        }
    }
]


campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 21,
        "fields": {
            "year": 2020,
            "summary": "<p> <b> 2028 </b> will prove to be the most... puzzling election in American history. On the Republican side, you have Vice-President JD Vance attempting to forge a presidency of his own after 4 chaotic years of the Trump administration. On the Democratic side, you have... whatever the hell happened there... it's complicated, okay?\n\n<p> All you need to know is that somehow an 18-year-old genderfluid Deltarune fan somehow got the nomination and convinced some random dude they shitposted with 3 years ago to join the ticket. <p>This isn't going to go well for anyone.",
            "image_url": "https://i.imgur.com/cwSvPq4.png",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://i.imgur.com/ab6IQNN.gif",
            "recommended_reading": "<ul>\n<li><a href=https://www.chicagotribune.com/opinion/editorials/ct-edit-chicago-tribune-biden-endorsement-20200925-lnyxsb5qvrftnjjmj3rnzj33jy-story.html>Our Case For Joe Biden</a></li>\n<li><a href=https://nationalinterest.org/feature/case-trump-166808>The Case For Trump</a></li>\n<li><a href=https://www.npr.org/2020/11/18/935730100/how-biden-won-ramping-up-the-base-and-expanding-margins-in-the-suburbs>How Biden Won: Ramping Up The Base And Expanding Margins In The Suburbs</a></li>\n<li><a href=https://www.prospectmagazine.co.uk/politics/donald-trump-joe-biden-us-election-almost-win-votes-concede>Why Did Trump Almost Win?</a></li>\n<li><a href=https://www.hoover.org/research/no-evidence-voter-fraud-guide-statistical-claims-about-2020-election>No Evidence For Voter Fraud: A Guide To Statistical Claims About The 2020 Election</a></li>\n</ul>",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/2012-no-majority.jpg",
            "creator": "Dan Bryan",
            "display_year": "Smoke In The Air"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 300,
        "fields": {
            "first_name": "Gunsmoke",
            "last_name": "Exeon",
            "election": 21,
            "party": "\"Democratic Party\" - Boykisser Party",
            "state": "r/Deltarune",
            "priority": 1,
            "description": "<p>There are many interesting things to note about Gunsmoke. I will tell you three of the most important within that list.</p>\n\n<p> 1. <b> They are a socialist </b> - should they desire to actually win the election, they will have to moderate and disavow their beliefs.\n\n<p> 2. <b> They are gender-fluid. </b> While the country has grown more LGBT-phobic in recent years, this does offer a unique opportunity for Gunsmoke to invigorate the LGBT vote as well as make Republicans seem childish and mean-spirited for when they inevitably hurl slurs at them.\n\n<p> 3. They really, <i> really,<b> REALLY </b> </i> like Boykisser and Deltarune - Maybe... maybe we can use this to win Gen Z back?",
            "color_hex": "#7C56B9",
            "secondary_color_hex": "#90C0FF",
            "is_active": 1,
            "image_url": "https://i.imgur.com/Tw0PiLd.png",
            "electoral_victory_message": "<h3>\"We can now project that...\" </h3><p> \"<b> Gunsmokexeon </b> has been elected as the 48th President of the United States. This is a monumental occasion in American History, as Gunsmoke is the first ever LGBT+ person to ever be elected to the White House. In addition, it stands as a stunning rebuke of the Trump administration's policies over the last 4 years, primarily its conservative economic and social policies. \"<p> \"As for the GOP, they are assuredly deprecated by this defeat. After 4 years, it seems that the country has finally chosen to move on from MAGA ideology. This leaves 2032 as a potential pathway for the party to choose a new ideology - or double down on what has worked twice before.\"",
            "electoral_loss_message": "<h3>\"We can now project that...\" </h3><p> \"<b> James David Vance </b> has been elected as the 48th President of the United States. This is a historic moment in American History, as Vance will be the first ever Millennial President, potentially marking a shifting towards a younger generation in the American political system.\" <p> \"As for the Democrats, they are assuredly going to lean more to the right in their next go for the White House, with some high-ranking officials already signaling their support for rolling back on the parties left-wing social stances and pivoting towards a more populistic rhetoric.\" ",
            "no_electoral_majority_message": "<h3>How the fuck did you do this </h3> \"Replay the mod and don't get a deadlock this time I'm too tired to write an ending for this.\"",
            "description_as_running_mate": "",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 302,
        "fields": {
            "first_name": "ThePear",
            "last_name": "Person",
            "election": 21,
            "party": "Democratic Party - Hardline Moderate",
            "state": "r/thespinroom",
            "priority": 5,
            "description": "'",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://i.imgur.com/xptWmhX.png",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p> \"Gunsmoke, I'm not joining your ticket.\"\n\n<p> \":3 Please it'll be fun schlawg\"\n\n<p> \"No, it won't I already worked a campaign with Cooper in '26, and that sucked. I'm not putting myself in that line\"\n\n<p> <i> \"boykisserupset.jpg </i> I am inside your house.\"\n\n<p> \"Lol. Wait are you for real? Please don't break into my room please dont do this\"\n\n<p> \"Join the ticket.\"",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 301,
        "fields": {
            "first_name": "JD ",
            "last_name": "Vance",
            "election": 21,
            "party": "Republican Party - MAGA",
            "state": "Ohio",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#A73270",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 303,
        "fields": {
            "first_name": "Sarah Huckabee",
            "last_name": "Sanders",
            "election": 21,
            "party": "Republican Party - Southern Maga",
            "state": "Arkansas",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#aa225d",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 122645,
        "fields": {
            "candidate": 300,
            "running_mate": 302
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 157846,
        "fields": {
            "candidate": 301,
            "running_mate": 303
        }
    }
]

campaignTrail_temp.credits = "ThePearPerson; Gunsmoke gave me the idea"

campaignTrail_temp.opponents_default_json = [
    {
        "election": 21,
        "candidates": [
            300,
            301
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 21,
        "candidates": [
            300,
            301
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 21,
        "year": 2020,
        "is_premium": 0,
        "display_year": "Smoke In The Air"
    }
]

jet_data = {
    "headerColor": "#b25bb9",
    "windowColor": "#8db49c",
    "containerColor": "#a23994",
    "innerWindowColor": "#e5ffeb",
    "bannerImageUrl": "https://i.imgur.com/s74NzsJ.png",
    "backgroundImageUrl": "https://coolbackgrounds.io/images/backgrounds/white/pure-white-background-85a2a7fd.jpg",
    "endingTextColor": "#000000",
    "customQuote": "\"I really like tucker\" - Gunsmokexeon",
    "gameTitle": "Smoke In The Air"
}

//#startcode


corrr = '\n              <h2>Smoke In The Air</h2><font id="wittyquote" size="4" color="white"><em>"I really like tucker" - Gunsmokexeon</em></font>\n            ';


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#b25bb9";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#8db49c";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#a23994";

document.getElementById("header").src = "https://i.imgur.com/s74NzsJ.png";

document.body.background = "https://coolbackgrounds.io/images/backgrounds/white/pure-white-background-85a2a7fd.jpg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#e5ffeb!important;}</style>";

// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#B386E6;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#8F669A;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}

// Track list

var soundtracks = {
  0: {
    name: "Exeon's Favorites",
    tracklist: [
      {
        "name": "Pink Floyd - In The Flesh?",
        "url": "https://audio.jukehost.co.uk/hlRBKfAF2JFJPyXabkCPED3vkfX9HNMs"
      },
      {
        "name": "Toby Fox – Attack of the Killer Queen",
        "url": "https://audio.jukehost.co.uk/Rr1Ujm4pmamAbCHUciWjbopQrlRL1eVS"
      },
      {
        "name": " The Chambers Brothers – Time Has Come Today",
        "url": "https://audio.jukehost.co.uk/2YQeXZMRirAO8GkBQvHP2MG5aJydfBzM"
      },
      {
        "name": "Pink Floyd – Us and Them",
        "url": "https://audio.jukehost.co.uk/Fb3UmUWGvsu5cCZwdDPiwKDzJE83maJ8"
      },
      {
        "name": "Toby Fox – Vs. Susie",
        "url": "https://audio.jukehost.co.uk/GRVOlMRqOhdPvQdSmXq2L91YILjfBCLZ"
      },              
    ]
  },
  1: {
    name: "Pear Playlist",
    tracklist: [
      {
        "name": "House of the Rising Sun - The Rolling Stones",
        "url": "https://audio.jukehost.co.uk/Djxqdn84YDEsOpGKqhj4buQoTNU95Joo"
      },
      {
        "name": "Jackie's Box (Sped up 2x and then slowed down 2x) - XTRATUNA",
        "url": "https://audio.jukehost.co.uk/uCV18BuzFBwGJeeDDwAJuKeYmsqm29RN"
      },
      {
        "name": " Dear Boy - Eugene McCarthy",
        "url": "https://audio.jukehost.co.uk/TdPZC1dUrUSYlHOr0EjS1i2cREMIrsnx"
      },
      {
        "name": "The Instrumentals of Dear Boy - Joeseph McCarthy",
        "url": "https://audio.jukehost.co.uk/VbMiYwS4gZNPseyFbfbHY4twJerHpubV"
      },              
    ]
  }
}

// Set up new music player

newMusicPlayer()

RecReading=true


//#endcode
